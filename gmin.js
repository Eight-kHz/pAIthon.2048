const _0x46a726=_0x5047;(function(_0x4b505f,_0x5e581c){const _0x1376a1=_0x5047,_0x79fb60=_0x4b505f();while(!![]){try{const _0x1c10e1=-parseInt(_0x1376a1(0x19c))/0x1+parseInt(_0x1376a1(0x16b))/0x2+-parseInt(_0x1376a1(0x1a3))/0x3*(parseInt(_0x1376a1(0x1bb))/0x4)+parseInt(_0x1376a1(0x1b8))/0x5*(-parseInt(_0x1376a1(0x175))/0x6)+parseInt(_0x1376a1(0x1b2))/0x7+-parseInt(_0x1376a1(0x177))/0x8+parseInt(_0x1376a1(0x182))/0x9*(parseInt(_0x1376a1(0x1a7))/0xa);if(_0x1c10e1===_0x5e581c)break;else _0x79fb60['push'](_0x79fb60['shift']());}catch(_0xb8ccab){_0x79fb60['push'](_0x79fb60['shift']());}}}(_0x4c2b,0xaf76e));function _0x5047(_0x4f09a2,_0x1781e4){const _0x4c2b12=_0x4c2b();return _0x5047=function(_0x504777,_0x45d09f){_0x504777=_0x504777-0x168;let _0x373fd2=_0x4c2b12[_0x504777];return _0x373fd2;},_0x5047(_0x4f09a2,_0x1781e4);}const gridSize=0x4;let grid=[],score=0x0,record=0x0,initialRecordLoaded=![];function init(){const _0x1ee1c2=_0x5047;document[_0x1ee1c2(0x1af)]('game-over-overlay')[_0x1ee1c2(0x183)][_0x1ee1c2(0x195)]=_0x1ee1c2(0x191),grid=Array(gridSize*gridSize)[_0x1ee1c2(0x169)](0x0),score=0x0,updateScore(),addRandomTile(),addRandomTile(),drawGrid();}function getParamsFromURL(){const _0x286db1=_0x5047,_0x288157=new URLSearchParams(window[_0x286db1(0x1a1)]['search']),_0x537ab8=_0x288157['get']('r');let _0x2035ec='Unknown',_0x25ee9a=_0x286db1(0x18c),_0x472bde=0x0;if(!_0x537ab8)console[_0x286db1(0x176)]('No\x20data\x20found\x20in\x20URL!\x20Starting\x20game\x20with\x20default\x20values.');else try{const _0x4ed323=atob(_0x537ab8),_0x2db949=JSON[_0x286db1(0x1a4)](_0x4ed323);_0x2035ec=_0x2db949['u']||_0x2035ec,_0x25ee9a=_0x2db949['m']||_0x25ee9a,_0x472bde=_0x2db949['r']||_0x472bde;}catch(_0x2eef8c){console['error'](_0x286db1(0x168),_0x2eef8c);}const _0x4694a3={'type':_0x286db1(0x1b4),'score':_0x472bde,'user':_0x2035ec,'m_id':_0x25ee9a};return{'user':_0x2035ec,'m_id':_0x25ee9a,'record':_0x472bde,'payload':_0x4694a3};}function _0x4c2b(){const _0x4c287e=['clientY','innerHTML','includes','touchend','translate(-50%,\x20-60%)','#3a3a3a','touches','data-value',',\x2070%,\x2055%)','6DxUrYa','error','5178848DAEcRk','querySelector','filter','clientX','Server\x20response:','transform','opacity','push','#f65e3b','record','changedTouches','90RtRpIg','style','game-container','random','mousemove','flex','popup-message','#edc53f','left','length','0000','load','game-over-overlay','key','#edc22e','none','⚠️\x20Ошибка\x20при\x20сохранении\x20рекорда','addEventListener','scrollWidth','display','catch','block','abs','textContent','#f59563','stringify','702062zIhpUS','map','click','POST','log','location','right','6mtXzPn','parse','success','className','2104170SSCYHi','translate(-50%,\x20-50%)','cors','json','then','offsetWidth','#f2b179','#edc850','getElementById','floor','https://mygame2048.loca.lt/game_score','5866399bVmxjg','⚠️\x20Не\x20удалось\x20сохранить\x20рекорд','2048','mouseup','#ede0c8','Ошибка\x20при\x20отправке\x20рекорда:','6754415eiWrHO','fontSize','#edcc61','1733492uLglhE','setAttribute','flat','div','touchstart','down','tile','Error\x20parsing\x20JSON\x20from\x20URL:','fill','.restart-button','2687044enYwHK'];_0x4c2b=function(){return _0x4c287e;};return _0x4c2b();}function isGameOver(){const _0x387d54=_0x5047;return!grid[_0x387d54(0x16e)](0x0)&&!canMerge();}function showPopup(_0x61297c){const _0x592c27=_0x5047,_0x24f972=document[_0x592c27(0x1af)](_0x592c27(0x188));_0x24f972[_0x592c27(0x199)]=_0x61297c,_0x24f972[_0x592c27(0x183)][_0x592c27(0x195)]=_0x592c27(0x187),_0x24f972['style'][_0x592c27(0x17d)]='0',_0x24f972[_0x592c27(0x183)][_0x592c27(0x17c)]=_0x592c27(0x170),setTimeout(()=>{const _0x26bb9d=_0x592c27;_0x24f972[_0x26bb9d(0x183)][_0x26bb9d(0x17d)]='1',_0x24f972[_0x26bb9d(0x183)]['transform']=_0x26bb9d(0x1a8);},0xa),setTimeout(()=>{const _0x13979d=_0x592c27;_0x24f972[_0x13979d(0x183)][_0x13979d(0x17d)]='0',_0x24f972[_0x13979d(0x183)][_0x13979d(0x17c)]=_0x13979d(0x170),setTimeout(()=>{const _0x8c29ba=_0x13979d;_0x24f972[_0x8c29ba(0x183)][_0x8c29ba(0x195)]=_0x8c29ba(0x191);},0x12c);},0x9c4);}function sendScoreToBot(){const _0x2ff0db=_0x5047,{user:_0x47993c,m_id:_0x1e4990}=getParamsFromURL();if(_0x1e4990===_0x2ff0db(0x18c)){showPopup('⚠️\x20Рекорд\x20не\x20сохранён,\x20зайди\x20через\x20Телеграм!');return;}const _0xf6b6c5={'type':_0x2ff0db(0x1b4),'score':record,'user':_0x47993c,'m_id':_0x1e4990};console[_0x2ff0db(0x1a0)](_0x47993c,_0x1e4990,record),console[_0x2ff0db(0x1a0)](_0xf6b6c5),fetch(_0x2ff0db(0x1b1),{'method':_0x2ff0db(0x19f),'headers':{'Content-Type':'application/json'},'body':JSON[_0x2ff0db(0x19b)](_0xf6b6c5),'mode':_0x2ff0db(0x1a9)})[_0x2ff0db(0x1ab)](_0x3c1a26=>_0x3c1a26[_0x2ff0db(0x1aa)]())[_0x2ff0db(0x1ab)](_0x43cecb=>{const _0x29e24b=_0x2ff0db;console[_0x29e24b(0x1a0)](_0x29e24b(0x17b),_0x43cecb),showPopup(_0x43cecb[_0x29e24b(0x1a5)]?'✅\x20Рекорд\x20сохранён!':_0x29e24b(0x192));})[_0x2ff0db(0x196)](_0x5153b4=>{const _0x55c50f=_0x2ff0db;console[_0x55c50f(0x176)](_0x55c50f(0x1b7),_0x5153b4),showPopup(_0x55c50f(0x1b3));});}function updateFontSize(){const _0x3fca87=_0x5047,_0x5d404e=document[_0x3fca87(0x1af)]('score'),_0x51d7c4=document[_0x3fca87(0x1af)](_0x3fca87(0x180));function _0x4d0059(_0x34cb27){const _0x4440da=_0x3fca87,_0xd2c9b8=_0x34cb27[_0x4440da(0x199)];let _0x201701=1.5;const _0x5ca8f4=_0x34cb27[_0x4440da(0x1ac)];while(_0x34cb27[_0x4440da(0x194)]>_0x5ca8f4&&_0x201701>0.5){_0x201701-=0.1,_0x34cb27[_0x4440da(0x183)][_0x4440da(0x1b9)]=_0x201701+'rem';}}_0x4d0059(_0x5d404e),_0x4d0059(_0x51d7c4);}function updateScore(){const _0x2177e6=_0x5047,_0x4ce94d=document[_0x2177e6(0x1af)]('score'),_0x1bf4d2=document['getElementById'](_0x2177e6(0x180));score>record&&(record=score),_0x4ce94d[_0x2177e6(0x199)]=score,_0x1bf4d2[_0x2177e6(0x199)]=record,updateFontSize();}function canMerge(){for(let _0x11736f=0x0;_0x11736f<gridSize;_0x11736f++){for(let _0x22012e=0x0;_0x22012e<gridSize;_0x22012e++){const _0x1bea4d=grid[_0x11736f*gridSize+_0x22012e],_0x51c69d=_0x22012e<gridSize-0x1?grid[_0x11736f*gridSize+_0x22012e+0x1]:0x0,_0xbf2f87=_0x11736f<gridSize-0x1?grid[(_0x11736f+0x1)*gridSize+_0x22012e]:0x0;if(_0x1bea4d===_0x51c69d||_0x1bea4d===_0xbf2f87)return!![];}}return![];}function drawGrid(){const _0x1c4479=_0x5047,_0x116080=document[_0x1c4479(0x1af)](_0x1c4479(0x184));_0x116080[_0x1c4479(0x16d)]='',grid['forEach'](_0x57c499=>{const _0x215a83=_0x1c4479,_0x40060c=document['createElement'](_0x215a83(0x1be));_0x40060c[_0x215a83(0x1a6)]=_0x215a83(0x1c1),_0x40060c[_0x215a83(0x1bc)](_0x215a83(0x173),_0x57c499>0x0?_0x57c499:''),_0x40060c['style']['background']=_0x57c499>0x0?getTileColor(_0x57c499):_0x215a83(0x171),_0x40060c[_0x215a83(0x199)]=_0x57c499>0x0?_0x57c499:'',_0x116080['appendChild'](_0x40060c);});}function getTileColor(_0x138ee9){const _0x4bb8b6=_0x5047,_0x504f95={0x0:_0x4bb8b6(0x171),0x2:'#eee4da',0x4:_0x4bb8b6(0x1b6),0x8:_0x4bb8b6(0x1ad),0x10:_0x4bb8b6(0x19a),0x20:'#f67c5f',0x40:_0x4bb8b6(0x17f),0x80:'#edcf72',0x100:_0x4bb8b6(0x1ba),0x200:_0x4bb8b6(0x1ae),0x400:_0x4bb8b6(0x189),0x800:_0x4bb8b6(0x190)};if(_0x138ee9 in _0x504f95)return _0x504f95[_0x138ee9];let _0x22f333=Math['log2'](_0x138ee9),_0x3541f2=_0x22f333*0x23%0x168;return'hsl('+_0x3541f2+_0x4bb8b6(0x174);}function addRandomTile(){const _0xe78bf=_0x5047,_0x1b9e9d=grid['map']((_0x1d88e7,_0x143302)=>_0x1d88e7===0x0?_0x143302:-0x1)[_0xe78bf(0x179)](_0x54675e=>_0x54675e!==-0x1);if(_0x1b9e9d['length']===0x0)return;const _0xa2e5f3=_0x1b9e9d[Math[_0xe78bf(0x1b0)](Math[_0xe78bf(0x185)]()*_0x1b9e9d[_0xe78bf(0x18b)])];grid[_0xa2e5f3]=Math['random']()<0.9?0x2:0x4;}function move(_0x4445cf){const _0x40af92=_0x5047,_0x3bbe51=Array(gridSize)[_0x40af92(0x169)]()[_0x40af92(0x19d)](()=>Array(gridSize)[_0x40af92(0x169)](0x0));let _0x48f420=![];for(let _0x31a2af=0x0;_0x31a2af<gridSize;_0x31a2af++){let _0x41c7cf=[];for(let _0x66600e=0x0;_0x66600e<gridSize;_0x66600e++){let _0x48b198;if(_0x4445cf===_0x40af92(0x18a))_0x48b198=grid[_0x31a2af*gridSize+_0x66600e];if(_0x4445cf===_0x40af92(0x1a2))_0x48b198=grid[_0x31a2af*gridSize+(gridSize-0x1-_0x66600e)];if(_0x4445cf==='up')_0x48b198=grid[_0x66600e*gridSize+_0x31a2af];if(_0x4445cf==='down')_0x48b198=grid[(gridSize-0x1-_0x66600e)*gridSize+_0x31a2af];if(_0x48b198!==0x0)_0x41c7cf[_0x40af92(0x17e)](_0x48b198);}const _0x38b41a=[..._0x41c7cf];_0x41c7cf=mergeRow(_0x41c7cf);while(_0x41c7cf[_0x40af92(0x18b)]<gridSize)_0x41c7cf[_0x40af92(0x17e)](0x0);for(let _0x72989f=0x0;_0x72989f<gridSize;_0x72989f++){let _0x27d264=_0x41c7cf[_0x72989f];if(_0x4445cf===_0x40af92(0x18a))_0x3bbe51[_0x31a2af][_0x72989f]=_0x27d264;if(_0x4445cf===_0x40af92(0x1a2))_0x3bbe51[_0x31a2af][gridSize-0x1-_0x72989f]=_0x27d264;if(_0x4445cf==='up')_0x3bbe51[_0x72989f][_0x31a2af]=_0x27d264;if(_0x4445cf===_0x40af92(0x1c0))_0x3bbe51[gridSize-0x1-_0x72989f][_0x31a2af]=_0x27d264;}JSON[_0x40af92(0x19b)](_0x38b41a)!==JSON[_0x40af92(0x19b)](_0x41c7cf)&&(_0x48f420=!![]);}_0x48f420&&(grid=_0x3bbe51[_0x40af92(0x1bd)](),addRandomTile(),updateScore(),drawGrid(),isGameOver()&&(document['getElementById']('game-over-overlay')['style'][_0x40af92(0x195)]=_0x40af92(0x197),sendScoreToBot()));}function mergeRow(_0x21dabd){const _0x1fb434=_0x5047;let _0x151da1=[],_0x420202=![];for(let _0x2a35c0=0x0;_0x2a35c0<_0x21dabd[_0x1fb434(0x18b)];_0x2a35c0++){if(_0x420202){_0x420202=![];continue;}_0x2a35c0<_0x21dabd[_0x1fb434(0x18b)]-0x1&&_0x21dabd[_0x2a35c0]===_0x21dabd[_0x2a35c0+0x1]&&_0x21dabd[_0x2a35c0]!==0x0?(_0x151da1['push'](_0x21dabd[_0x2a35c0]*0x2),score+=_0x21dabd[_0x2a35c0]*0x2,_0x420202=!![]):_0x151da1[_0x1fb434(0x17e)](_0x21dabd[_0x2a35c0]);}return _0x151da1;}window['addEventListener']('keydown',_0x4e25b5=>{const _0x2edf94=_0x5047,_0x574349={'ArrowLeft':_0x2edf94(0x18a),'ArrowRight':_0x2edf94(0x1a2),'ArrowUp':'up','ArrowDown':_0x2edf94(0x1c0)};_0x574349[_0x4e25b5[_0x2edf94(0x18f)]]&&move(_0x574349[_0x4e25b5[_0x2edf94(0x18f)]]);});let touchStartX=0x0,touchStartY=0x0;window[_0x46a726(0x193)](_0x46a726(0x1bf),_0x325d50=>{const _0x5ba4bc=_0x46a726,_0x3fdb39=_0x325d50[_0x5ba4bc(0x172)][0x0];touchStartX=_0x3fdb39[_0x5ba4bc(0x17a)],touchStartY=_0x3fdb39['clientY'];}),window[_0x46a726(0x193)](_0x46a726(0x16f),_0x50ac83=>{const _0x256291=_0x46a726,_0x5a38a5=_0x50ac83[_0x256291(0x181)][0x0],_0x3ee7d6=_0x5a38a5['clientX']-touchStartX,_0x55ed55=_0x5a38a5['clientY']-touchStartY;if(Math[_0x256291(0x198)](_0x3ee7d6)<minSwipeDistance&&Math['abs'](_0x55ed55)<minSwipeDistance)return;Math['abs'](_0x3ee7d6)>Math[_0x256291(0x198)](_0x55ed55)?move(_0x3ee7d6>0x0?'right':'left'):move(_0x55ed55>0x0?_0x256291(0x1c0):'up');});let mouseStartX=0x0,mouseStartY=0x0,isDragging=![];const minSwipeDistance=0xa;window[_0x46a726(0x193)]('mousedown',_0x5bab63=>{mouseStartX=_0x5bab63['clientX'],mouseStartY=_0x5bab63['clientY'],isDragging=![];}),window[_0x46a726(0x193)](_0x46a726(0x186),_0x1f4580=>{const _0x4ff1d1=_0x46a726;if(isDragging)return;const _0x1f038c=_0x1f4580[_0x4ff1d1(0x17a)]-mouseStartX,_0xfeffe7=_0x1f4580[_0x4ff1d1(0x16c)]-mouseStartY;(Math[_0x4ff1d1(0x198)](_0x1f038c)>minSwipeDistance||Math[_0x4ff1d1(0x198)](_0xfeffe7)>minSwipeDistance)&&(isDragging=!![]);}),window[_0x46a726(0x193)](_0x46a726(0x1b5),_0x3de544=>{const _0x3cf91f=_0x46a726;if(!isDragging)return;const _0xd7542b=_0x3de544[_0x3cf91f(0x17a)]-mouseStartX,_0x5217e2=_0x3de544[_0x3cf91f(0x16c)]-mouseStartY;if(Math['abs'](_0xd7542b)<minSwipeDistance&&Math['abs'](_0x5217e2)<minSwipeDistance)return;Math['abs'](_0xd7542b)>Math[_0x3cf91f(0x198)](_0x5217e2)?move(_0xd7542b>0x0?_0x3cf91f(0x1a2):'left'):move(_0x5217e2>0x0?_0x3cf91f(0x1c0):'up'),isDragging=![];}),window['onload']=()=>{const _0x3b72cb=_0x46a726;init(),updateFontSize();const {user:_0x160e16,m_id:_0x3505d9,record:_0x307af7,payload:_0x2b1e2e}=getParamsFromURL();console['log'](_0x160e16,_0x3505d9,_0x307af7),console[_0x3b72cb(0x1a0)](_0x2b1e2e),_0x307af7>0x0&&(document[_0x3b72cb(0x1af)]('record')['textContent']=_0x307af7),document[_0x3b72cb(0x178)](_0x3b72cb(0x16a))[_0x3b72cb(0x193)](_0x3b72cb(0x19e),init),document[_0x3b72cb(0x1af)](_0x3b72cb(0x18e))[_0x3b72cb(0x193)](_0x3b72cb(0x19e),()=>{const _0x1663fd=_0x3b72cb;document[_0x1663fd(0x1af)](_0x1663fd(0x18e))['style'][_0x1663fd(0x195)]=_0x1663fd(0x191),init();});},window[_0x46a726(0x193)](_0x46a726(0x18d),()=>{const {user:_0x5bdc30,m_id:_0x430eb6,record:_0x1b84b2}=getParamsFromURL();record=_0x1b84b2,init();});
